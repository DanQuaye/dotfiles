#!/bin/bash

# Set the correct executable to use
# Prefer hub but fall back to normal git
GIT=`which hub`
if [ -z "$GIT" ]; then
    GIT=`which git`
fi


die()
{
    echo "$*"
    exit 1
}

setemail()
{

    CHECKDIR="${@:(-1)}"
    if [ -d "$CHECKDIR" ]; then
        cd "$CHECKDIR"
    fi
    "$GIT" config user.email "$WORKEMAIL"
    "$GIT" config repo.environment "work"
}

createrepo()
{
    "$GIT" init "$@"
}

WORKEMAIL=`git config --get work.email`
REPODIR=`pwd`

echo "Hey, it looks like you're creating a git repo!"

WORKREPO="n"
echo -n "Is this a work repo? (y/N) "
read WORKREPO
if [ "$WORKREPO" == "y" ]; then
    echo "I'll set your work email and use the work template"
    createrepo
    setemail
else
    echo "No worries"
    createrepo
fi

