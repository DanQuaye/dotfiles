# Path to your oh-my-zsh configuration.
# # the basics
: ${HOME=~}
: ${LOGNAME=$(id -un)}
: ${UNAME=$(uname)}
: ${ZSH=$HOME/.oh-my-zsh}

# ----------------------------------------------------------------------
# ONLY FOR INTERACTIVE SHELLS
# ----------------------------------------------------------------------

# Don't load bashrc if this isn't an interactive shell
if [ -z '$PS1' ]; then
   return
fi

# ----------------------------------------------------------------------
# ZSH SETTINGS
# ----------------------------------------------------------------------

# Set name of the theme to load.
# Look in ~/.oh-my-zsh/themes/
# Optionally, if you set this to "random", it'll load a random theme each
# time that oh-my-zsh is loaded.
ZSH_THEME="agnoster"

DEFAULT_USER=$LOGNAME

# Turn off oh-my-zsh asking to update
DISABLE_AUTO_UPDATE=true

# Which plugins would you like to load? (plugins can be found in ~/.oh-my-zsh/plugins/*)
# Custom plugins may be added to ~/.oh-my-zsh/custom/plugins/
# Example format: plugins=(rails git textmate ruby lighthouse)
plugins=(git vi-mode brew cabal fabric history jira npm pip python sbt scala postgres virtualenv vagrant)

source $ZSH/oh-my-zsh.sh

# ----------------------------------------------------------------------
# EXPORTED VARIABLES
# ----------------------------------------------------------------------
# General variables used in other places

export DOTFILES=$HOME/.dotfiles
export REPODIR=$HOME/src

# ----------------------------------------------------------------------
# BOXEN
# ----------------------------------------------------------------------

# source the boxen script, for great good

[ -f /opt/boxen/env.sh ] && source /opt/boxen/env.sh

# ----------------------------------------------------------------------
# PATH
# ----------------------------------------------------------------------

PATH=/usr/local/bin:$DOTFILES/bin:$DOTFILES/notes.txt:$DOTFILES/commiter8:$PATH

if $(brew --prefix &>/dev/null); then
    export BREWPATH=`brew --prefix`

    # if brew and coreutils are installed, then add the gnubin to the path
    if $(gls &>/dev/null); then
        PATH="$BREWPATH/opt/coreutils/libexec/gnubin:$PATH"
    fi

fi

# put ~/bin on PATH if you have it
if [ -d "$HOME/bin" ]; then
    PATH="$HOME/bin:$PATH"
fi
export PATH

# ----------------------------------------------------------------------
# ENVIRONMENT CONFIGURATION
# ----------------------------------------------------------------------

# history stuff
export HISTCONTROL=ignoredups:ignorespace

# use good dircolors
if $(gdircolors &>/dev/null); then
    eval `dircolors $DOTFILES/dircolors.ansi-dark`
fi

# ----------------------------------------------------------------------
# PAGER / EDITOR
# ----------------------------------------------------------------------

# EDITOR
if [ -n "$(command -v vim)" ]; then
    EDITOR=vim
else
    EDITOR=vi
fi
export EDITOR

# PAGER
if [ -n "$(command -v less)" ]; then
    PAGER="less -FirSwX"
    MANPAGER="less -FiRswX"
else
    PAGER=more
    MANPAGER="$PAGER"
fi
export PAGER MANPAGER

# ----------------------------------------------------------------------
# INPUT
# ----------------------------------------------------------------------

# set vim bindings
set -o vi

# ----------------------------------------------------------------------
# COMPLETIONS
# ----------------------------------------------------------------------

# add custom completion scripts
fpath=($DOTFILES/completions $fpath)

# compsys initialization
autoload -U compinit
compinit

# show completion menu when number of options is at least 2
zstyle ':completion:*' menu select=2

# ----------------------------------------------------------------------
# ALIASES
# ----------------------------------------------------------------------

# This needs to be sourced before the OSX file

# Source the aliases file
source "$DOTFILES/aliases.sh"

# ----------------------------------------------------------------------
# FUNCTIONS
# ----------------------------------------------------------------------

# Some useful functions
source "$DOTFILES/functions.sh"

# ----------------------------------------------------------------------
# OSX
# ----------------------------------------------------------------------

# If this is OSX then source the bash.osx file
if [ "$UNAME" = Darwin ]; then
    source "$DOTFILES/bashrc.osx"
fi

# ----------------------------------------------------------------------
# NOTIFICATIONS
# ----------------------------------------------------------------------

source $DOTFILES/zsh-notify/notify.plugin.zsh

# ----------------------------------------------------------------------
# LANGUAGES
# ----------------------------------------------------------------------
# Specific config for any programming languages

for l in $DOTFILES/languages/*; do
    source $l
done

# ----------------------------------------------------------------------
# MISC
# ----------------------------------------------------------------------

# Used for machine specific settings
if [ -f "$HOME/.localrc" ]; then
    source "$HOME/.localrc"
fi


