# Path to your oh-my-zsh configuration.
# # the basics
: ${HOME=~}
: ${LOGNAME=$(id -un)}
: ${UNAME=$(uname)}
: ${ZSH=$HOME/.oh-my-zsh}
: ${DOTFILES=$HOME/.dotfiles}
: ${REPODIR=$HOME/src}
: ${SHELLCFG=$DOTFILES/shellcfg}

# ----------------------------------------------------------------------
# ONLY FOR INTERACTIVE SHELLS
# ----------------------------------------------------------------------

# Don't load bashrc if this isn't an interactive shell
if [ -z interactive ]; then
   return
fi

# ----------------------------------------------------------------------
# BOXEN
# ----------------------------------------------------------------------

# source the boxen script, for great good

[ -f /opt/boxen/env.sh ] && source /opt/boxen/env.sh

# ----------------------------------------------------------------------
# TERM
# ----------------------------------------------------------------------

# correctly set terminal
export TERM='xterm-256color'

# ----------------------------------------------------------------------
# ZSH SETTINGS
# ----------------------------------------------------------------------

source $SHELLCFG/rumblesan-theme.zsh

# Load and run compinit
autoload -U add-zsh-hook
autoload -U compinit
compinit -i

# ----------------------------------------------------------------------
# PATH
# ----------------------------------------------------------------------

PATH=/usr/local/bin:$DOTFILES/bin:$PATH

# put ~/bin on PATH if you have it
if [ -d $HOME/bin ]; then
    PATH="$HOME/bin:$PATH"
fi
export PATH

# ----------------------------------------------------------------------
# ENVIRONMENT CONFIGURATION
# ----------------------------------------------------------------------

# ignore OSX folder setting files
FIGNORE="DS_Store"

# history stuff
export HISTCONTROL=ignoredups:ignorespace

# use good dircolors
if [ -n "$(command -v dircolors)" ]; then
    eval `dircolors $SHELLCFG/dircolors.ansi-dark`
fi

# ----------------------------------------------------------------------
# PAGER / EDITOR
# ----------------------------------------------------------------------

# EDITOR
if [ -n "$(command -v vim)" ]; then
    EDITOR="vim -w $HOME/.vimlog"
else
    EDITOR="vi -w $HOME/.vimlog"
fi
export EDITOR

# PAGER
if [ -n "$(command -v less)" ]; then
    PAGER="less -FirSwX"
    MANPAGER="less -FiRswX"
else
    PAGER=more
    MANPAGER="$PAGER"
fi
export PAGER MANPAGER

# ----------------------------------------------------------------------
# INPUT
# ----------------------------------------------------------------------

# set vim bindings
bindkey -v

# ----------------------------------------------------------------------
# COMPLETIONS
# ----------------------------------------------------------------------

# this should fix the git/hub alias completion issue
if [ -n "$(command -v hub)" ]; then
    eval "$(hub alias -s)"
fi

# add custom completion scripts
fpath=($SHELLCFG/completions $fpath)

# compsys initialization
autoload -U compinit
compinit

# show completion menu when number of options is at least 2
zstyle ':completion:*' menu select=2

# ----------------------------------------------------------------------
# ALIASES
# ----------------------------------------------------------------------

source $SHELLCFG/aliases.sh

# ----------------------------------------------------------------------
# FUNCTIONS
# ----------------------------------------------------------------------

source $SHELLCFG/functions.sh

# ----------------------------------------------------------------------
# LANGUAGES
# ----------------------------------------------------------------------
# Specific config for any programming languages

for l in $SHELLCFG/languages/*; do
    source $l
done

# ----------------------------------------------------------------------
# MISC
# ----------------------------------------------------------------------
# Miscellaneous config

for l in $SHELLCFG/misc/*; do
    source $l
done

# ----------------------------------------------------------------------
# OSX
# ----------------------------------------------------------------------
# OSX specific stuff

if [[ "$OSTYPE" == "darwin"* ]]
then
    source $SHELLCFG/zshrc-osx.sh
fi

# ----------------------------------------------------------------------
# DIRENV
# ----------------------------------------------------------------------
# Activate direnv hook if direnv installed

if [ -n "$(command -v direnv)" ]; then
    eval "$(direnv hook zsh)"
fi

# ----------------------------------------------------------------------
# MISC
# ----------------------------------------------------------------------
# Used for machine specific settings

[ -f $HOME/.localrc ] && source $HOME/.localrc

